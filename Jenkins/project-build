pipeline {
    agent any

    parameters {
        string defaultValue: "..\src\CombatAnalysis.WebApp\CombatAnalysis.WebApp.csproj", name: "PROJECT_PATH"
        string defaultValue: "..\tests\CombatAnalysis.Parser.Tests\CombatAnalysis.Parser.Tests.csproj", name: "TEST_PROJECT_PATH"
    }

    stages {
        stage("Build") {
            steps {
                bat "dotnet restore ${PROJECT_PATH}"
                bat "dotnet build ${PROJECT_PATH}"
            }
        }
        stage("Run Tests") {
            steps {
                bat "dotnet test ${TEST_PROJECT_PATH}"
            }
        }
    }
}
